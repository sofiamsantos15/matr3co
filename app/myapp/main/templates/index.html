{% extends "base.html" %}
{% block content %}
{% if search_query %}
  <h3>Resultados da pesquisa por "{{ search_query }}"</h3>
  {% if products %}
    <p>{{ products|length }} produto(s) encontrado(s).</p>
  {% else %}
    <div class="alert alert-warning">
      <p>Nenhum produto encontrado para "{{ search_query }}".</p>
      <a href="{{ url_for('main.index') }}" class="btn btn-primary mt-2">Voltar à Página Inicial</a>
    </div>
  {% endif %}
{% endif %}

<div class="container mt-4">
  <div class="row row-cols-1 row-cols-md-4 g-4">
    {% for p in products %}
      <div class="col">
        <div class="card h-100">
          {% if p.thumb %}
            <img src="{{ url_for('static', filename='images/uploads/' ~ p.thumb) }}"
                 class="card-img-top" alt="{{ p.title }}">
          {% endif %}
          <div class="card-body">
            <h5 class="card-title">{{ p.title }}</h5>
            <p class="card-text">
              {{ "{:,.2f}".format(p.price) }} €
              {% if p.is_negotiable %}<small>(negociável)</small>{% endif %}
            </p>
            <a href="{{ url_for('products.detail', product_id=p.id) }}"
               class="btn btn-primary">Ver detalhe</a>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
</div>
{% endblock %}
